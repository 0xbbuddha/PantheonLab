No config file found; using defaults

PLAY [Configuration du DC01] ***************************************************

TASK [Gathering Facts] *********************************************************
ok: [dc01]

TASK [Installer les rôles AD-Domain-Services et DNS] ***************************
ok: [dc01] => {"changed": false, "exitcode": "NoChangeNeeded", "feature_result": [], "reboot_required": false, "success": true}

TASK [Définir le mot de passe de l'administrateur local] ***********************
ok: [dc01] => {"account_disabled": false, "account_locked": false, "changed": false, "description": "Built-in account for administering the computer/domain", "fullname": "", "groups": [{"name": "Domain Users", "path": "WinNT://PANTHEON/DC01/Domain Users"}, {"name": "Schema Admins", "path": "WinNT://PANTHEON/DC01/Schema Admins"}, {"name": "Enterprise Admins", "path": "WinNT://PANTHEON/DC01/Enterprise Admins"}, {"name": "Domain Admins", "path": "WinNT://PANTHEON/DC01/Domain Admins"}, {"name": "Group Policy Creator Owners", "path": "WinNT://PANTHEON/DC01/Group Policy Creator Owners"}, {"name": "Administrators", "path": "WinNT://PANTHEON/DC01/Administrators"}], "name": "Administrator", "password_expired": false, "password_never_expires": false, "path": "WinNT://PANTHEON/DC01/Administrator", "sid": "S-1-5-21-2598927279-2365496597-1728435326-500", "state": "present", "user_cannot_change_password": false}

TASK [Configurer le DNS local] *************************************************
changed: [dc01] => {"changed": true, "cmd": "Set-DnsClientServerAddress -InterfaceAlias \"Ethernet 2\" -ServerAddresses \"127.0.0.1\"\nif (-not (Get-DnsServerZone -Name \"pantheon.god\" -ErrorAction SilentlyContinue)) {\n  Add-DnsServerPrimaryZone -Name \"pantheon.god\" -ZoneFile \"pantheon.god.dns\" -DynamicUpdate None\n}\nif (-not (Get-DnsServerResourceRecord -ZoneName \"pantheon.god\" -Name \"@\" -ErrorAction SilentlyContinue)) {\n  Add-DnsServerResourceRecordA -Name \"@\" -ZoneName \"pantheon.god\" -IPv4Address \"192.168.56.11\"\n}", "delta": "0:00:02.609431", "end": "2025-06-01 08:26:21.025180", "rc": 0, "start": "2025-06-01 08:26:18.415748", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

TASK [Créer l'enregistrement DNS pour dc01] ************************************
changed: [dc01] => {"changed": true, "cmd": "$zoneName = \"pantheon.god\"\n$recordName = \"dc01\"\n$ipAddress = \"192.168.56.11\"\n\n# Vérifier si l'enregistrement existe déjà\n$existingRecord = Get-DnsServerResourceRecord -ZoneName $zoneName -Name $recordName -ErrorAction SilentlyContinue\n\nif (-not $existingRecord) {\n    # Créer l'enregistrement A\n    Add-DnsServerResourceRecordA -Name $recordName -ZoneName $zoneName -IPv4Address $ipAddress -CreatePtr\n    Write-Host \"Enregistrement DNS créé pour $recordName.$zoneName\"\n} else {\n    Write-Host \"L'enregistrement DNS existe déjà pour $recordName.$zoneName\"\n}", "delta": "0:00:01.405883", "end": "2025-06-01 08:26:23.399934", "rc": 0, "start": "2025-06-01 08:26:21.994051", "stderr": "Add-DnsServerResourceRecordA : Failed to create PTR record. Resource record dc01 in zone pantheon.god on server DC01 \r\nis created successfully, but corresponding PTR record could not be created.\r\nAt line:10 char:5\r\n+     Add-DnsServerResourceRecordA -Name $recordName -ZoneName $zoneNam ...\r\n+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : NotSpecified: (dc01:root/Microsoft/...ResourceRecordA) [Add-DnsServerResourceRecordA], C \r\n   imException\r\n    + FullyQualifiedErrorId : WIN32 9715,Add-DnsServerResourceRecordA", "stderr_lines": ["Add-DnsServerResourceRecordA : Failed to create PTR record. Resource record dc01 in zone pantheon.god on server DC01 ", "is created successfully, but corresponding PTR record could not be created.", "At line:10 char:5", "+     Add-DnsServerResourceRecordA -Name $recordName -ZoneName $zoneNam ...", "+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~", "    + CategoryInfo          : NotSpecified: (dc01:root/Microsoft/...ResourceRecordA) [Add-DnsServerResourceRecordA], C ", "   imException", "    + FullyQualifiedErrorId : WIN32 9715,Add-DnsServerResourceRecordA"], "stdout": "Enregistrement DNS créé pour dc01.pantheon.god\n", "stdout_lines": ["Enregistrement DNS créé pour dc01.pantheon.god"]}

TASK [Créer le dossier NTDS] ***************************************************
ok: [dc01] => {"changed": false}

TASK [Créer le domaine] ********************************************************
ok: [dc01] => {"changed": false, "reboot_required": false}

TASK [Redémarrer après création du domaine] ************************************
skipping: [dc01] => {"changed": false, "false_condition": "check_domain.changed", "skip_reason": "Conditional result was False"}

TASK [Promouvoir le serveur en contrôleur de domaine] **************************
ok: [dc01] => {"changed": false, "reboot_required": false}

TASK [Redémarrer après promotion en contrôleur de domaine] *********************
skipping: [dc01] => {"changed": false, "false_condition": "check_domain_controller.changed", "skip_reason": "Conditional result was False"}

TASK [S'assurer que l'administrateur est dans le groupe Enterprise Admins] *****
ok: [dc01] => {"added": [], "changed": false, "members": ["Administrator"], "removed": []}

TASK [S'assurer que l'administrateur est dans le groupe Domain Admins] *********
ok: [dc01] => {"added": [], "changed": false, "members": ["Administrator", "zeus", "hera"], "removed": []}

TASK [Créer les utilisateurs dieux dans l'AD] **********************************
changed: [dc01] => (item={'name': 'Zeus', 'password': 'Z3us!2025@Pantheon'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Zeus - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=zeus,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Zeus", "password": "Z3us!2025@Pantheon"}, "msg": "User 'zeus' is present", "name": "zeus", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "zeus", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1104", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Héra', 'password': 'sjljkdH3r@!2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Héra - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=hera,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Héra", "password": "sjljkdH3r@!2025"}, "msg": "User 'hera' is present", "name": "hera", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "hera", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1105", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Poséidon', 'password': 'ljflsdjfP0s3!d0n@2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Poséidon - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=poseidon,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Poséidon", "password": "ljflsdjfP0s3!d0n@2025"}, "msg": "User 'poseidon' is present", "name": "poseidon", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "poseidon", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1106", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Déméter', 'password': 'sljfjdslD3m3t3r!2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Déméter - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=demeter,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Déméter", "password": "sljfjdslD3m3t3r!2025"}, "msg": "User 'demeter' is present", "name": "demeter", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "demeter", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1107", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Athéna', 'password': 'sljflfkjdAth3n@!2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Athéna - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=athena,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Athéna", "password": "sljflfkjdAth3n@!2025"}, "msg": "User 'athena' is present", "name": "athena", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "athena", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1108", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Apollon', 'password': 'sldjfsljdAp0ll0n!2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Apollon - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=apollon,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Apollon", "password": "sldjfsljdAp0ll0n!2025"}, "msg": "User 'apollon' is present", "name": "apollon", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "apollon", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1109", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Artémis', 'password': 'vniodvArt3m!s@2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Artémis - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=artemis,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Artémis", "password": "vniodvArt3m!s@2025"}, "msg": "User 'artemis' is present", "name": "artemis", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "artemis", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1110", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Arès', 'password': 'nlkvldsjiAr3s!2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Arès - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=ares,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Arès", "password": "nlkvldsjiAr3s!2025"}, "msg": "User 'ares' is present", "name": "ares", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "ares", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1111", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Aphrodite', 'password': 'sdvnofiAphrod!t3@2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Aphrodite - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=aphrodite,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Aphrodite", "password": "sdvnofiAphrod!t3@2025"}, "msg": "User 'aphrodite' is present", "name": "aphrodite", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "aphrodite", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1112", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Héphaïstos', 'password': 'nvlnsdifH3ph@!st0s2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Héphaïstos - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=hephaistos,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Héphaïstos", "password": "nvlnsdifH3ph@!st0s2025"}, "msg": "User 'hephaistos' is present", "name": "hephaistos", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "hephaistos", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1113", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Hermès', 'password': 's€€nvlsdkfH3mess!2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Hermès - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=hermes,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Hermès", "password": "s€€nvlsdkfH3mess!2025"}, "msg": "User 'hermes' is present", "name": "hermes", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "hermes", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1114", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}
changed: [dc01] => (item={'name': 'Dionysos', 'password': 'lnvksdjfD!0nys0s@2025'}) => {"account_locked": false, "ansible_loop_var": "item", "changed": true, "city": null, "company": null, "country": null, "created": false, "delegates": [], "description": "Dionysos - Dieu de l'Olympe", "display_name": null, "distinguished_name": "CN=dionysos,CN=Users,DC=pantheon,DC=god", "email": null, "enabled": true, "firstname": null, "groups": "CN=Domain Users,CN=Users,DC=pantheon,DC=god", "item": {"name": "Dionysos", "password": "lnvksdjfD!0nys0s@2025"}, "msg": "User 'dionysos' is present", "name": "dionysos", "password_expired": false, "password_never_expires": false, "password_updated": true, "postal_code": null, "sam_account_name": "dionysos", "sid": "S-1-5-21-2598927279-2365496597-1728435326-1115", "spn": [], "state": "present", "state_province": null, "street": null, "surname": null, "upn": null, "user_cannot_change_password": false}

TASK [Ajouter Zeus au groupe Enterprise Admins] ********************************
changed: [dc01] => {"added": ["zeus"], "changed": true, "members": ["Administrator", "zeus"], "removed": []}

TASK [Ajouter Zeus au groupe Domain Admins] ************************************
changed: [dc01] => {"added": ["zeus"], "changed": true, "members": ["Administrator", "zeus"], "removed": []}

PLAY RECAP *********************************************************************
dc01                       : ok=13   changed=5    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   

